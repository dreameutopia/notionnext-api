name = "notionnext-api"
main = "src/index.js"
compatibility_date = "2024-11-01"
compatibility_flags = ["nodejs_compat"]

# D1 数据库绑定
[[d1_databases]]
binding = "DB"
database_name = "notionnext-db"
database_id = "718e4959-1ba8-4541-a879-7646f66d6d00" # 运行 wrangler d1 create notionnext-db 后替换

# KV 绑定（用于缓存）
[[kv_namespaces]]
binding = "CACHE"
id = "39780c3ec1214faeaab01f13f01d47ad" # 运行 wrangler kv:namespace create CACHE 后替换

# R2 绑定（用于存储图片/文件）
[[r2_buckets]]
binding = "STORAGE"
bucket_name = "notionnext-storage"

# 环境变量
[vars]
ENVIRONMENT = "production"
API_VERSION = "1.0.0"

# 开发环境配置
[env.dev]
name = "notionnext-api-worker-dev"
vars = { ENVIRONMENT = "development" }

[[env.dev.d1_databases]]
binding = "DB"
database_name = "notionnext-db-dev"
database_id = "your-dev-database-id"
